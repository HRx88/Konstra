<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage NGO Projects - Konstra Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/admin-sidebar.css">
    <link rel="stylesheet" href="css/admin-projects.css">
</head>

<body>

    <nav class="admin-sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="admin-home.html" class="brand-text"><i class="fas fa-print me-2"></i>AdminPanel</a>
        </div>
        <div class="d-flex flex-column">
            <a href="admin-home.html" class="nav-link" id="nav-dashboard"><i class="fas fa-tachometer-alt"></i>
                Dashboard</a>
            <a href="admin-doc.html" class="nav-link" id="nav-document"><i class="fas fa-folder-open"></i> Document</a>
            <a href="chat.html" class="nav-link" id="nav-chat"><i class="fas fa-comments"></i> Chat</a>
            <a href="my-meetings.html" class="nav-link" id="nav-meeting"><i class="fas fa-video"></i> Meeting</a>
            <a href="admin-printadobe.html" class="nav-link" id="nav-printadobe"><i class="fas fa-graduation-cap"></i>
                PrintAdobe</a>
            <a href="admin-credentials.html" class="nav-link" id="nav-credentials"><i class="fas fa-certificate"></i>
                Credentials</a>
            <a href="admin-projects.html" class="nav-link active" id="nav-project"><i class="fas fa-tasks"></i>
                Project</a>
            <a href="admin-profile.html" class="nav-link" id="nav-profile"><i class="fas fa-user-circle"></i>
                Profile</a>
        </div>
        <div class="logout-btn-container">
            <button id="logoutBtn" class="btn btn-outline-danger w-100"><i class="fas fa-sign-out-alt me-2"></i>
                Logout</button>
        </div>
    </nav>

    <main class="main-content">
        <button class="btn btn-dark d-md-none mb-4" id="mobileDashToggle">
            <i class="fas fa-bars"></i>
        </button>
        <div id="statusMessage" class="alert shadow-sm"></div>

        <div class="container-fluid">
            <!-- Professional Integrated Header -->
            <div class="page-header">
                <div class="header-top">
                    <div class="header-title-area">
                        <h2 class="fw-bold">NGO Project Management</h2>
                        <p class="text-muted mb-0">Monitor and update progress milestones for NGO partners.</p>
                    </div>
                    <div class="header-action-area d-none d-md-block">
                        <span class="badge bg-light text-dark border p-2 px-3">
                            <i class="fas fa-user-shield me-2 text-primary"></i>Admin Portal
                        </span>
                    </div>
                </div>

                <!-- Integrated Card Selection -->
                <div id="ngoCardList" class="ngo-card-list">
                    <!-- Cards will be injected here -->
                    <div class="text-center w-100">
                        <div class="spinner-border spinner-border-sm text-danger" role="status"></div>
                    </div>
                </div>
            </div>

            <div class="content-wrap">

                <div id="statsFormContainer" style="display: none;">
                    <div class="glass-card">
                        <form id="ngoStatsForm">
                            <input type="hidden" id="selectedNgoId">

                            <!-- New Analytics Dashboard Section (Consolidated) -->
                            <div class="form-section pb-4 mb-4" style="border-bottom: 2px dashed #eee;">
                                <h5 class="mb-4"><i class="fas fa-chart-pie me-2 text-primary"></i>Project Analytics &
                                    Metrics</h5>
                                <div class="row g-4 mb-4">
                                    <div class="col-lg-5">
                                        <div class="p-3 border rounded bg-light h-100">
                                            <h6 class="text-center text-muted small fw-bold mb-3">CONSTRUCTION STATUS
                                            </h6>
                                            <div style="height: 200px; position: relative;">
                                                <canvas id="statusChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="p-3 border rounded bg-light h-100">
                                            <h6 class="text-center text-muted small fw-bold mb-3">IMPACT OVERVIEW</h6>
                                            <div style="height: 200px; position: relative;">
                                                <canvas id="impactChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Construction Metrics Moved Here -->
                                <div class="p-3 bg-light rounded border mb-3">
                                    <h6 class="text-muted fw-bold mb-3"><i
                                            class="fas fa-tools me-2 text-success"></i>Construction Metrics Inputs</h6>
                                    <div class="stats-grid">
                                        <div>
                                            <label class="form-label">Houses Built (Target)</label>
                                            <input type="number" id="housesBuilt" class="form-control" placeholder="0">
                                        </div>
                                        <div>
                                            <label class="form-label">Homes Completed</label>
                                            <input type="number" id="homesCompleted" class="form-control"
                                                placeholder="0">
                                        </div>
                                        <div>
                                            <label class="form-label">Work In Progress</label>
                                            <input type="number" id="constructionInProgress" class="form-control"
                                                placeholder="0">
                                        </div>
                                    </div>
                                </div>

                                <!-- Impact Statistics Moved Here -->
                                <div class="p-3 bg-light rounded border">
                                    <h6 class="text-muted fw-bold mb-3"><i
                                            class="fas fa-globe me-2 text-warning"></i>Impact Statistics Inputs</h6>
                                    <div class="stats-grid">
                                        <div>
                                            <label class="form-label">Impacted Families</label>
                                            <input type="number" id="impactedFamilies" class="form-control"
                                                placeholder="0">
                                        </div>
                                        <div>
                                            <label class="form-label">CO2 Saved (kg)</label>
                                            <div class="input-group">
                                                <input type="number" id="co2Saved" class="form-control" placeholder="0">
                                                <span class="input-group-text">kg</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h5><i class="fas fa-chart-line me-2 text-primary"></i>Financial & Overall Progress</h5>
                                <div class="stats-grid">
                                    <div>
                                        <label class="form-label">Total Funding ($)</label>
                                        <div class="input-group">
                                            <span class="input-group-text">$</span>
                                            <input type="number" id="totalFunding" class="form-control" placeholder="0">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="form-label">Project Progress (%)</label>
                                        <div class="input-group">
                                            <input type="number" id="progress" class="form-control" min="0" max="100"
                                                placeholder="0">
                                            <span class="input-group-text">%</span>
                                        </div>
                                        <div class="progress progress-preview">
                                            <div id="progressBar" class="progress-bar" role="progressbar"
                                                style="width: 0%">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-end pt-3">
                                <button type="button" class="btn btn-outline-secondary me-2" id="btnResetChanges">Reset
                                    Changes</button>
                                <button type="submit" class="btn btn-premium">Update NGO Records</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Placeholder -->
                <div id="placeholderState" class="text-center py-5">
                    <i class="fas fa-clipboard-list fa-4x text-muted opacity-25 mb-3"></i>
                    <h4 class="text-muted">Select an NGO partner above to start managing data</h4>
                </div>
            </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/admin-projects.js"></script>
</body>

</html>