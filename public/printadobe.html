<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="Author" content="Codi Chew">
    <meta name="Description" content="MDC ASG for Konstra - Fantastic 4">
    <meta name="Date created" content="6 December 2025">
    <meta name="viewport" content="Width=device-width, initial scale=1.0">
    <link rel="icon" href="/Media/Konstra Logo B.png">
    <link rel="stylesheet" href="/css/Style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <title>PrintAdobe - Konstra</title>
    <style>
        :root {
            --brand-yellow: #FFD200;
            --brand-dark: #1a1a1a;
            --primary-red: #d32f2f;
            --hover-red: #b71c1c;
            --light-bg: #ffffff;
        }

        /* --- Navbar & Hero --- */
        .brand-text {
            color: var(--primary-red);
            font-weight: 800;
            font-size: 1.5rem;
        }

        .hero-section {
            background-color: var(--brand-yellow);
            padding: 60px 0 40px;
            text-align: center;
        }

        .hero-title {
            color: var(--brand-dark);
            font-weight: 800;
            margin-bottom: 20px;
        }

        .hero-subtitle {
            color: #2c2c2c;
            max-width: 800px;
            margin: 0 auto;
            font-weight: 500;
        }

        /* --- Tabs Styling --- */
        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
            justify-content: center;
            margin-bottom: 40px;
            margin-top: -20px;
            background: white;
            padding-top: 20px;
        }

        .nav-tabs .nav-link {
            color: #555;
            font-weight: 600;
            border: none;
            border-bottom: 3px solid transparent;
            padding: 15px 30px;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .nav-tabs .nav-link:hover {
            color: var(--primary-red);
            border-color: transparent;
        }

        .nav-tabs .nav-link.active {
            color: var(--primary-red);
            border: none;
            border-bottom: 3px solid var(--primary-red);
            background: transparent;
        }

        /* --- Cards --- */
        .program-card {
            border: 1px solid #eee;
            border-radius: 12px;
            transition: transform 0.3s, box-shadow 0.3s;
            height: 100%;
            background: white;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(211, 47, 47, 0.15);
            border-color: var(--primary-red);
        }

        .card-img-top {
            height: 200px;
            object-fit: cover;
            background-color: #eee;
        }

        .card-body {
            padding: 25px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .card-title {
            font-weight: 700;
            color: #222;
            margin-bottom: 10px;
            font-size: 1.25rem;
        }

        .card-text {
            color: #666;
            font-size: 0.95rem;
            flex-grow: 1;
            margin-bottom: 15px;
        }

        /* --- PRICE TAG STYLING --- */
        .price-tag {
            font-size: 1.5rem;
            color: var(--primary-red);
            font-weight: 800;
            margin-bottom: 10px;
            display: block;
        }

        .price-sub {
            font-size: 0.9rem;
            color: #777;
            font-weight: 400;
        }

        .btn-custom {
            background-color: var(--primary-red);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            width: 100%;
            margin-top: auto;
            transition: background 0.3s;
        }

        .btn-custom:hover {
            background-color: var(--hover-red);
            color: white;
        }

        /* --- Intake & Trip Specifics --- */
        .spots-badge {
            font-size: 0.85rem;
            background-color: #e3f2fd;
            color: #0d47a1;
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .spots-badge.full {
            background-color: #ffebee;
            color: #c62828;
        }

        .trip-meta {
            font-size: 0.9rem;
            color: #777;
            margin-bottom: 15px;
            display: flex;
            gap: 15px;
        }

        /* Navbar Tweaks for Bootstrap compatibility */
        a {
            text-decoration: none;
        }
    </style>
</head>

<body>
    <!-- NavBar Group -->
    <nav class="navbar">
        <div class="navbar-container">
            <!-- Navbar Logo -->
            <a href="Index.html" class="navbar-logo">
                <img src="/Media/Konstra Logo B.png">
            </a>

            <!-- Hamburger dropdown links-->
            <button class="navbar-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>

            <!-- Navbar Links -->
            <ul class="navbar-menu">
                <!-- 
                        <li><a href="#" class="currentPage">HOME</a></li> 
                        Note: Set the class currentPage when working on that specific page 
                        to display the selected state of that link.
                        -->
                <li><a href="Index.html">HOME</a></li>
                <li><a href="#">ABOUT US</a></li>
                <li><a href="#">PRODUCT</a></li>
                <li><a href="printadobe.html" class="currentPage">PRINTADOBE</a></li>
                <li><a href="#">OUR PROJECTS</a></li>
                <li><a href="#">CONTACT US</a></li>
                <li class="account"><a href="login.html"><img src="/Media/Profile Alt.png"></a></li>
            </ul>
        </div>
    </nav>

    <!-- Insert page content from this point onwards -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title display-4">Build the Future</h1>
            <p class="hero-subtitle lead">
                PrintAdobe is Konstra's education-driven initiative designed to inspire the next generation of builders,
                architects, and engineers through robotics, automation, and immersive travel experiences.
            </p>
        </div>
    </section>

    <div class="container pb-5">

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="education-tab" data-bs-toggle="tab" data-bs-target="#education"
                    type="button" role="tab">
                    <i class="fas fa-graduation-cap me-2"></i>Education Programs
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="trip-tab" data-bs-toggle="tab" data-bs-target="#trip" type="button"
                    role="tab">
                    <i class="fas fa-plane-departure me-2"></i>Immersive Trips
                </button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">

            <div class="tab-pane fade show active" id="education" role="tabpanel">
                <div class="row g-4" id="education-list">
                    <!-- Dynamic Loading -->
                    <div class="text-center w-100 py-5">
                        <div class="spinner-border text-danger" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3 text-muted">Loading Education Programs...</p>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="trip" role="tabpanel">
                <h3 class="text-center mb-4" style="color: #555;">Join Our Upcoming Site Visits</h3>
                <div class="row g-4 justify-content-center" id="trip-list">
                    <!-- Dynamic Loading -->
                    <div class="text-center w-100 py-5">
                        <div class="spinner-border text-danger" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3 text-muted">Loading Trips...</p>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- Footer Group -->
    <footer>
        <div class="footer-container">
            <div class="footer-left">
                <p>Copyright Â© 2025 Konstra3d, All Rights Reserved.</p>
                <p>Privacy Policy</p>
                <p>Cookie Policy</p>
            </div>

            <div class="footer-right">
                <p>FOLLOW US</p>
                <ul class="Socials">
                    <li>
                        <a href="https://www.instagram.com/konstrarobotics" target="_blank"><img
                                src="/Media/Instagram_White.png"></a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/company/konstra-robotics/" target="_blank"><img
                                src="/Media/LinkedIn_White.png"></a>
                    </li>
                    <li>
                        <a href="https://www.facebook.com/61578675961442/about/" target="_blank"><img
                                src="/Media/Facebook_White.png"></a>
                    </li>
                </ul>
            </div>
        </div>
        </div>
    </footer>

    <!-- All Javascript components here -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/NavBarHamburger.js"></script> <!-- Navbar Hamburger Menu -->

    <script>
        function goToEnrollment(item, type, price, imageUrl) {
            // Encode parameters to be URL safe
            const url = `enrollment.html?item=${encodeURIComponent(item)}&type=${encodeURIComponent(type)}&price=${price}&image=${encodeURIComponent(imageUrl)}`;
            window.location.href = url;
        }

        async function loadPrograms() {
            try {
                const response = await fetch('/api/programs');
                if (!response.ok) throw new Error('Failed to load programs');

                const programs = await response.json();

                const eduContainer = document.getElementById('education-list');
                const tripContainer = document.getElementById('trip-list');

                // Clear Loaders
                eduContainer.innerHTML = '';
                tripContainer.innerHTML = '';

                if (programs.length === 0) {
                    eduContainer.innerHTML = '<p class="text-center">No active programs found.</p>';
                }

                programs.forEach(program => {
                    const isTrip = program.Type === 'Trip';
                    const container = isTrip ? tripContainer : eduContainer;

                    const enrolled = program.EnrolledCount || 0;
                    const max = program.MaxParticipants || 20;

                    // Logic for badges
                    let badge = '';
                    if (enrolled >= max) {
                        badge = `<span class="spots-badge full"><i class="fas fa-ban me-1"></i> Full</span>`;
                    } else if (enrolled >= max * 0.8) {
                        badge = `<span class="spots-badge full"><i class="fas fa-fire me-1"></i> ${enrolled}/${max} Filling Fast</span>`;
                    } else {
                        badge = `<span class="spots-badge"><i class="fas fa-user-check me-1"></i> ${enrolled}/${max} Enrolled</span>`;
                    }

                    // Fallback Image
                    const image = program.ImageURL || 'https://images.unsplash.com/photo-1581092921461-eab6245b0262';

                    const html = `
                    <div class="${isTrip ? 'col-md-4' : 'col-md-6 col-lg-3'}">
                        <div class="program-card">
                            <div style="position: relative;">
                                <img src="${image}" class="card-img-top" alt="${program.Title}" style="height: 200px; object-fit: cover;">
                                <div style="position:absolute; top:10px; right:10px;">${badge}</div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">${program.Title}</h5>

                                ${isTrip ? `
                                <div class="trip-meta">
                                    <span><i class="fas fa-map-marker-alt text-danger"></i> ${program.Location || 'TBA'}</span>
                                    <span><i class="fas fa-clock text-danger"></i> ${program.Duration || 'TBA'}</span>
                                </div>
                                ` : ''}

                                <p class="card-text">${program.Description ? program.Description.substring(0, 80) + '...' : 'Create the future with us.'}</p>
                                <div class="price-tag">$${program.Price} <span class="price-sub">/ ${isTrip ? 'person' : 'course'}</span></div>
                                <button class="btn btn-custom"
                                    onclick="goToEnrollment(${program.ProgramID}, '${program.Title.replace(/'/g, "\\'")}', '${program.Type}', '${program.Price}', '${image}')">
                                    ${isTrip ? 'Book Trip' : 'Enroll Now'}
                                </button>
                                
                                ${!isTrip ? `<a href="printadobe-details.html?id=${program.ProgramID}" class="btn btn-link w-100 text-decoration-none mt-2" style="color:#555;">View Details</a>` : ''}
                            </div>
                        </div>
                    </div>
                    `;

                    container.innerHTML += html;
                });

            } catch (err) {
                console.error("Fetch Error:", err);
                document.getElementById('education-list').innerHTML = '<p class="text-danger text-center">Failed to load programs. Please try again later.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', loadPrograms);
    </script>
</body>

</html>