<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard - PrintAdobe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/user-dashboard.css">
</head>

<body>

    <nav class="dashboard-sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="#" class="brand-text"><i class="fas fa-user me-2"></i>KonstraMember</a>
        </div>
        <div class="d-flex flex-column">
            <a href="user-dashboard.html" class="nav-link active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <a href="user-doc.html" class="nav-link"><i class="fas fa-folder-open"></i> Documents</a>
            <a href="chat.html" class="nav-link"><i class="fas fa-comments"></i> Chat</a>
            <a href="user-printadobe.html" class="nav-link"><i class="fas fa-graduation-cap"></i> Printadobe</a>
            <a href="user-credentials.html" class="nav-link"><i class="fas fa-certificate"></i> Credentials</a>
            <a href="profile.html" class="nav-link"><i class="fas fa-user-circle"></i> Profile</a>
            <a href="user-overview.html" class="nav-link"><i class="fas fa-chart-pie"></i> Overview</a>
        </div>
        <div class="logout-btn">
            <button id="logoutBtn" class="btn btn-outline-danger w-100"><i class="fas fa-sign-out-alt me-2"></i>
                Logout</button>
        </div>
    </nav>

    <main class="main-content">
        <button class="btn btn-dark d-md-none mb-3" id="mobileDashToggle">
            <i class="fas fa-bars"></i> Menu
        </button>

        <!-- DASHBOARD HEADER -->
        <div class="dashboard-hero mb-4 p-4 rounded-3">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="fw-bold" id="welcomeMsg">Welcome back</h1>
                    <p class="mb-0 text-muted" id="dateDisplay">Loading date...</p>
                </div>
            </div>
        </div>

        <!-- STATS ROW -->
        <div class="row g-4 mb-5">
            <div class="col-md-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-warning bg-opacity-10 text-warning rounded-circle p-3 me-3">
                            <i class="fas fa-book-open fa-2x"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Active Courses</h6>
                            <h3 class="fw-bold mb-0" id="activeEnrollments">-</h3>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-success bg-opacity-10 text-success rounded-circle p-3 me-3">
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Completed</h6>
                            <h3 class="fw-bold mb-0" id="completedCourses">-</h3>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body d-flex align-items-center">
                        <div class="stat-icon bg-primary bg-opacity-10 text-primary rounded-circle p-3 me-3">
                            <i class="fas fa-certificate fa-2x"></i>
                        </div>
                        <div>
                            <h6 class="text-muted mb-1">Certificates</h6>
                            <h3 class="fw-bold mb-0" id="certificatesCount">-</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-4">
            <!-- LEFT COLUMN: MAIN CONTENT -->
            <div class="col-lg-8">
                <!-- TABS -->
                <ul class="nav nav-tabs mb-4" id="dashboardTabs">
                    <li class="nav-item">
                        <button class="nav-link active fw-bold text-dark" id="tab-active" onclick="switchTab('active')">
                            <i class="fas fa-graduation-cap me-2"></i>My Learning
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link text-muted" id="tab-history" onclick="switchTab('history')">
                            <i class="fas fa-history me-2"></i>History
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link text-muted" id="tab-trips" onclick="switchTab('trips')">
                            <i class="fas fa-plane me-2"></i>Immersive Trips
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link text-muted" id="tab-training" onclick="switchTab('training')">
                            <i class="fas fa-desktop me-2"></i>Live Online Lessons
                        </button>
                    </li>
                </ul>

                <div id="loadingSpinner" class="text-center py-5">
                    <div class="spinner-border text-warning" role="status"></div>
                    <p class="mt-2 text-muted">Loading your portal...</p>
                </div>

                <div id="contentArea" class="row g-4" style="display:none;">
                    <!-- DYNAMIC CONTENT INJECTED HERE -->
                </div>
            </div>

            <!-- RIGHT COLUMN: DISCOUNTS & ANNOUNCEMENTS -->
            <div class="col-lg-4">
                <!-- My Discount Codes Section -->
                <div id="discountSection" class="p-3 bg-white rounded-3 shadow-sm mb-3">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="fw-bold text-dark mb-0"><i class="fas fa-tags me-2 text-success"></i>My Discount
                            Codes</h6>
                    </div>
                    <div id="userDiscountList">
                        <div class="text-center py-3 text-muted small">
                            <i class="fas fa-spinner fa-spin me-1"></i> Loading...
                        </div>
                    </div>
                </div>

                <!-- Public Discount Codes Section -->
                <div id="publicDiscountSection" class="p-3 bg-white rounded-3 shadow-sm mb-3">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="fw-bold text-dark mb-0"><i class="fas fa-percent me-2 text-info"></i>Available Offers
                        </h6>
                    </div>
                    <div id="publicDiscountList">
                        <div class="text-center py-3 text-muted small">
                            <i class="fas fa-spinner fa-spin me-1"></i> Loading...
                        </div>
                    </div>
                </div>

                <!-- Announcements Section -->
                <div id="announcementSection" class="p-3 bg-white rounded-3 shadow-sm" style="display:none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="fw-bold text-dark mb-0"><i class="fas fa-bullhorn me-2 text-danger"></i>Announcements
                        </h5>
                        <a href="#" class="text-muted small text-decoration-none fw-bold" data-bs-toggle="modal"
                            data-bs-target="#announcementModal">View All</a>
                    </div>
                    <div class="row g-2" id="announcementList">
                        <!-- Announcements injected here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW ALL ANNOUNCEMENTS MODAL -->
        <div class="modal fade" id="announcementModal" tabindex="-1">
            <div class="modal-dialog modal-lg modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header border-0">
                        <h5 class="modal-title fw-bold">All Announcements</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body bg-light" id="allAnnouncementsBody">
                        <div class="text-center py-5">
                            <div class="spinner-border text-danger"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/user-dashboard.js"></script>
</body>

</html>